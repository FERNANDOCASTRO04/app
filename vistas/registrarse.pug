doctype html

html(lang="en")

  head
    title Registrarse
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    link(rel="icon", type="image/x-icon", href="https://raw.githubusercontent.com/FERNANDOCASTRO04/Agrofer/74b8586b89ec0191ef0648be0c505c9dfbd7c5a5/public/imagenes/logo.png")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css", rel="stylesheet", integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65", crossorigin="anonymous")
    link(rel="stylesheet", href="../registro.css")

  body(style="background-image: url('https://ruminants.ceva.pro/hubfs/mercado-de-ganado-1.jpg'); background-size: cover; background-position: center;  background-repeat: no-repeat;")

    .container.text-center 
      


      form(id="registroForm", action="/create-user", method="post")
        if message
          p#message(style='color: red;') #{message}
        p
          h4 REGISTRO DE USUARIO
        .container 
          img(src="https://raw.githubusercontent.com/FERNANDOCASTRO04/Agrofer/74b8586b89ec0191ef0648be0c505c9dfbd7c5a5/public/imagenes/logo.png", width="80")
          br

        
          .row.justify-content-center
            .col-auto
              b
                label(for="nom_usuario") NOMBRE Y APELLIDO 
              input(type="text", name="nom_usuario" class="form-control", required)

          .row.justify-content-center
            .col-auto
              b
                label(for="correo") E-mail 
              input(type="email", name="correo" class="form-control", required)

          .row.justify-content-center.mb-2
            .col-auto
              b
                label(for="password") CONTRASEÑA
              input(type="password", name="contrasena",  id="password" class="form-control", title="La  contraseña debe contener por lo menos 6 caracteres entre esos 1 mayuscula, 1 minuscula y 1 numero", required, minlength="6")
          .row.justify-content-center.mb-2
            .col-auto
              b 
                label(for="confirmPassword") CONFIRMAR CONTRASEÑA
              input(type="password", name="confirmPassword",  id="confirmPassword" class="form-control", title="La  contraseña debe contener por lo menos 6 caracteres entre esos 1 mayuscula, 1 minuscula y 1 numero", required, minlength="6")
          .row.justify-content-center
            .col-auto

              button.btn.btn-primary.mb-2(type="submit")
                | Registrarse
                svg(xmlns="http://www.w3.org/2000/svg", width="16", height="16", fill="currentColor", class="bi bi-check2", viewBox="0 0 16 16")
                  path(d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z")
            .col-auto
              a.btn.btn-primary(onclick="redireccionar()") Ir a la pagina principal
              script.
                function redireccionar() {
                  window.location.href = '/';
                }
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js", crossorigin="anonymous")
    script.
      document.addEventListener('DOMContentLoaded', function() {
        var messageElement = document.getElementById('message');
        if (messageElement) {
          alert("Este correo ya está registrado");
          document.getElementById("registroForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Evita que el formulario se envíe
          });
        }

        var registroForm = document.getElementById("registroForm");

        if (registroForm) {
          registroForm.addEventListener("submit", function(event) {
            var password = document.getElementById("password").value;
            var confirmPassword = document.getElementById("confirmPassword").value;

            if (password !== confirmPassword) {
              alert("Las contraseñas no coinciden. Por favor, inténtelo de nuevo.");
              event.preventDefault(); // Evita que el formulario se envíe
            }
          });
        }
      });



